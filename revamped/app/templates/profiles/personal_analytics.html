{% extends "profiles/user_dashboard_base.html" %}

{% block title %}
Personal Analytics
{% endblock title %}

{%block content %}
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<style>
.bubble-container {
	position: relative;
}

	.bubble {
		position: absolute;
		width: 15px;
		height: 15px;
		background-color: rgba(255, 165, 0, 0.8);
		border-radius: 50%;
		animation: bubbleAnimation 6s infinite;
		animation-timing-function: ease-in;
	}

	@keyframes bubbleAnimation {
		0% {
			transform: translateY(0) scale(1);
			opacity: 0.8;
		}
		50% {
			transform: translateY(-300px) scale(1.3);
			opacity: 0.5;
		}
		100% {
			transform: translateY(-600px) scale(1);
			opacity: 0.2;
		}
	}
</style>

<!-- Content Section -->
<div class="container mx-auto mt-8 p-8 bg-white rounded-lg shadow-lg relative">
	<h1 class="text-4xl font-semibold mb-6 text-blue-700">View Reward Points</h1>
	<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
		<!-- User Information -->
		<div class="bg-gradient-to-br from-indigo-700 via-indigo-600 to-indigo-700 rounded-lg p-6 text-white shadow-md">
			<h2 class="text-lg font-semibold mb-2">User Information</h2>
			<p class="text-sm">Name: John Doe</p>
			<p class="text-sm">Email: john@example.com</p>
			<p class="text-sm">Total Points: 350</p>
		</div>
		<!-- Reward Points -->
		<div class="bg-white rounded-lg p-6 shadow-md relative bubble-container">
			<h2 class="text-lg font-semibold mb-4 text-blue-700">Reward Points</h2>
			<div class="space-y-4">
				<!-- Single Reward Item -->
				<div class="flex items-center justify-between border-b border-gray-300 pb-4">
					<div class="flex flex-col">
						<span class="text-sm text-gray-600">Report Submission</span>
						<span class="text-lg font-semibold text-blue-700">+100 points</span>
					</div>
					<span class="text-sm text-gray-500">2023-08-20</span>
				</div>
				<!-- Add more reward items here -->
				<div class="flex items-center justify-between border-b border-gray-300 pb-4">
					<div class="flex flex-col">
						<span class="text-sm text-gray-600">Community Engagement</span>
						<span class="text-lg font-semibold text-blue-700">+50 points</span>
					</div>
					<span class="text-sm text-gray-500">2023-08-15</span>
				</div>
			</div>
			<div class="mt-6">
				<a href="#" class="text-blue-600 hover:underline">View All Reward History</a>
			</div>
			<!-- Bubbles Animation -->
			<div class="bubble" style="top: 150px; left: 60px; background-color: red;"></div>
			<div class="bubble" style="top: 290px; left: 20px; background-color: orange;"></div>
			<div class="bubble" style="top: 180px; left: 210px; background-color: yellow;"></div>
			<div class="bubble" style="top: 200px; left: 90px; background-color: green;"></div>
			<div class="bubble" style="top: 120px; left: 180px; background-color: blue;"></div>
			<div class="bubble" style="top: 230px; left: 180px; background-color: indigo;"></div>
			<div class="bubble" style="top: 300px; left: 280px; background-color: violet;"></div>
			<div class="bubble" style="top: 250px; left: 230px; background-color: gold;"></div>
			<div class="bubble" style="top: 400px; left: 400px; background-color: rgba(0, 191, 255, 0.8);"></div>
			<div class="bubble" style="top: 500px; left: 500px; background-color: rgba(255, 99, 71, 0.8);"></div>
			<div class="bubble" style="top: 500px; left: 600px; background-color: rgba(255, 223, 186, 0.8);"></div>
		</div>
	</div>
</div>

<!-- Rewards you are eligible -->
{% if rewards_eligible %}
<h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">Claim Your Reward Today!!!</h2>
<div class="w-full mb-8 overflow-hidden rounded-lg shadow-xs">
	<div class="w-full overflow-x-auto">
		<table class="w-full whitespace-no-wrap">
			<thead>
				<tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-gray-50 dark:text-gray-400 dark:bg-gray-800">
					<th class="px-4 py-3">Reward Name</th>
					<th class="px-4 py-3">Points Required</th>
					<th class="px-4 py-3">Actions</th>
				</tr>
			</thead>
			<tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
				{% for reward in rewards_eligible %}
				{% if reward.pointsRequired == current_user.pointsAcquired %}
				<tr class="text-gray-700 dark:text-gray-400">
					<td class="px-4 py-3">{{ reward.name }}</td>
					<td class="px-4 py-3">{{ reward.pointsRequired }}</td>
					<td class="px-4 py-3">
						<button class="text-purple-600 hover:text-purple-900">Claim</button>
					</td>
				</tr>
				{% endif %}
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% else %}
<h2 class="my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
	Oops!!! You are not eligible to win any reward. 
</h2>
<h4 class="mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300">
	Increase your participation to increase your chances of winnning the prices below.
</h4>
<div class="w-full mb-8 overflow-hidden rounded-lg shadow-xs">
	<div class="w-full overflow-x-auto">
		<table class="w-full whitespace-no-wrap">
			<thead>
				<tr class="text-xs font-semibold tracking-wide text-left text-gray-500 uppercase border-b dark:border-gray-700 bg-gray-50 dark:text-gray-400 dark:bg-gray-800">
					<th class="px-4 py-3">Reward Name</th>
					<th class="px-4 py-3">Points Required</th>
				</tr>
			</thead>
			<tbody class="bg-white divide-y dark:divide-gray-700 dark:bg-gray-800">
				{% for reward in rewards %}
				<tr class="text-gray-700 dark:text-gray-400">
					<td class="px-4 py-3">{{ reward.name }}</td>
					<td class="px-4 py-3">{{ reward.pointsRequired }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endif %}
{% endblock content %}
